<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
</html>
<script type="javascript">
    function load_select_from_database(url,selected_element){
        selected_element.empty()
        $.get(url, function (data) {
            var clslist = data['data']
            for (var i = clslist.length - 1; i >= 0; i--) {
                selected_element.append("<li><a>" + clslist[i] + "</a></li>")
            }
    }
    window.onload = function () {
        //console.log('获得第一级菜单')
        //分类查询，提供品牌和站点的二级互联
        //将品牌选择设为空
        $('#selectBrand').empty()
        //获得菜单的第一级分类
        $.get('/manage/onecls', function (data) {
            var clslist = data['data']
            //console.log(clslist)
            selectcls = clslist[0]
            for (var i = clslist.length - 1; i >= 0; i--) {
                $('#selectBrand').append("<li><a>" + clslist[i] + "</a></li>")
            }
            //获得二级分类
            $.get("/manage/twocls", {'name': selectcls}, function (data) {
                var clslist = data['data']
                $('#selectSite').empty()
                $('#selectSite').append("<li><a>全部市场</a></option>")
                //console.log('二级菜单'+clslist)
                for (var i = clslist.length - 1; i >= 0; i--) {

                    $('#selectSite').append("<li><a>" + clslist[i] + "</a></option>")
                }
                //将下拉框的值设置为显示的值，由于下拉框处于动态变化，所以必须放在变化最后的位置，才能保证全部的下拉框绑定事件
                $('ul.dropdown-menu li').on('click', function () {
                    var selected = $(this).text()
                    $(this).parent().prev().text(selected)
                })
            })

        })
    }
</script>